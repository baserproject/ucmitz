/**
 * baserCMS :  Based Website Development Project <https://basercms.net>
 * Copyright (c) NPO baser foundation <https://baserfoundation.org/>
 *
 * @copyright     Copyright (c) NPO baser foundation
 * @link          https://basercms.net baserCMS Project
 * @since         5.0.0
 * @license       https://basercms.net/license/index.html MIT License
 */
$((function(){var e=$("#AdminWidgetFormScript").attr("data-delWidgetUrl"),t=$("#AdminWidgetFormScript").attr("data-currentAction"),a={scroll:!0,items:"div.sortable",opacity:.8,zIndex:55,containment:"body",tolerance:"intersect",distance:5,cursor:"move",placeholder:"ui-widget-content placeholder",deactivate:function(e,t){$("#Target").sortable("destroy"),$("#Target").sortable(a).droppable({hoverClass:"topDrop",accept:"div.sortable",tolderance:"intersect"})},update:function(e,t){if($(t.item.context).attr("id").match(/^Setting/i))r();else{var a=0;$("#Target .setting").each((function(){var e=parseInt($(this).attr("id").replace("Setting",""));e>a&&(a=e)})),a++;var o=$(t.item.context).attr("id").replace("Widget","").replace("Widget",""),n="Setting"+a,s="Tmp"+a;t.item.attr("id",s),$("#"+s).after($("#"+o).clone().attr("id",n)),$("#"+s).remove(),$("#"+n).addClass("setting"),$("#"+n).removeClass("template"),function(e){$("#Setting"+e+" .form").attr("id","WidgetUpdateWidgetForm"+e),$("#WidgetUpdateWidgetForm"+e).find("input, select, textarea").each((function(){$(this).attr("id")&&$(this).attr("id",$(this).attr("id")+e),null!=$(this).attr("name")&&$(this).attr("name").match(/data\[Widget\]/i)&&$(this).attr("name",$(this).attr("name").replace("data[Widget]","data[Widget"+e+"]"))})),$("#WidgetUpdateWidgetForm"+e).find("label").each((function(){$(this).attr("for")&&$(this).attr("for",$(this).attr("for")+e)}))}(a);var c=$("#"+n+" .widget-name").html();$("#"+n+" .head").html($("#"+n+" .head").html()+$("#Target ."+c).length),$("#WidgetId"+a).val(a),$("#WidgetName"+a).val($("#"+n+" .head").html()),i(a),$("#Target").sortable("refresh"),$("#"+n+" .content").slideDown("fast"),d(a)}},activate:function(e,t){$("#Source div:last").width(t.item.width()-20)}};function i(t){var a="Setting"+t;$("#WidgetUpdateWidgetSubmit"+t).click((function(){return d(t),!1})),$("#"+a+" .action").click((function(){$("#"+a+" .content").is(":hidden")?$("#"+a+" .content").slideDown("fast"):$("#"+a+" .content").slideUp("fast")})),$("#"+a+" .status").click((function(){$("#"+a+" .status").prop("checked")?$("#"+a).addClass("enabled"):$("#"+a).removeClass("enabled")})),$("#"+a+" .del").click((function(){var a;confirm(bcI18n.confirmMessage1)&&(a=t,$.bcToken.check((function(){return $("#WidgetAreaUpdateSortForm input[name='_csrfToken']").val($.bcToken.key),$.ajax({url:e+"/"+a,type:"POST",data:{_Token:{key:$.bcToken.key}},dataType:"text",beforeSend:function(){$("#WidgetAreaUpdateSortLoader").show(),$("#BcMessageBox").slideUp()},success:function(e){"1"!=e?$("#BcSystemMessage").html(bcI18n.alertMessage1):($("#Setting"+a).slideUp(200,(function(){$("#Setting"+a).remove(),r()})),$("#BcSystemMessage").html(bcI18n.infoMessage1)),$("#BcMessageBox").slideDown()},error:function(){$("#BcSystemMessage").html(bcI18n.alertMessage1),$("#BcMessageBox").slideDown()},complete:function(e,t){$("#WidgetAreaUpdateSortLoader").hide()}})}),{loaderType:"target",loaderSelector:"#WidgetAreaUpdateSortLoader",hideLoader:!1}))}))}function r(){var e=[];$("#Target .sortable").each((function(t,a){e.push($(this).attr("id").replace("Setting",""))})),$("#WidgetAreaSortedIds").val(e.join(",")),$.bcToken.check((function(){return $("#WidgetAreaUpdateSortForm input[name='_csrfToken']").val($.bcToken.key),$.ajax({url:$("#WidgetAreaUpdateSortForm").attr("action"),type:"POST",data:$("#WidgetAreaUpdateSortForm").serialize(),dataType:"text",beforeSend:function(){$("#WidgetAreaUpdateSortLoader").show()},success:function(e){"1"!=e&&($("#BcMessageBox").slideUp(),$("#BcSystemMessage").html(bcI18n.alertMessage2),$("#BcMessageBox").slideDown())},error:function(){$("#BcMessageBox").slideUp(),$("#BcSystemMessage").html(bcI18n.alertMessage2),$("#BcMessageBox").slideDown()},complete:function(e,t){$("#WidgetAreaUpdateSortLoader").hide()}})}),{loaderType:"target",loaderSelector:"#WidgetAreaUpdateSortLoader",hideLoader:!1})}function d(e){$.bcToken.check((function(){return $("#WidgetUpdateWidgetForm"+e+' input[name="_csrfToken"]').val($.bcToken.key),$.ajax({url:$("#WidgetUpdateWidgetForm"+e).attr("action"),type:"POST",data:$("#WidgetUpdateWidgetForm"+e).serialize(),dataType:"text",beforeSend:function(){$("#WidgetUpdateWidgetSubmit"+e).prop("disabled",!0),$("#WidgetUpdateWidgetLoader"+e).show(),$("#BcMessageBox").slideUp()},success:function(t){"1"!=t?$("#BcSystemMessage").html(bcI18n.alertMessage4):($("#Setting"+e+" .head").html($("#Setting"+e+" .name").val()),$("#BcSystemMessage").html(bcI18n.infoMessage3)),$("#BcMessageBox").slideDown()},error:function(){$("#BcSystemMessage").html(bcI18n.alertMessage4),$("#BcMessageBox").slideDown()},complete:function(t,a){$("#WidgetUpdateWidgetSubmit"+e).removeAttr("disabled"),$("#WidgetUpdateWidgetLoader"+e).hide(),r()}})}),{loaderType:"target",loaderSelector:"#WidgetUpdateWidgetLoader"+e,hideLoader:!1})}$("#Target").sortable(a).droppable({hoverClass:"topDrop",accept:"div.draggable",tolderance:"intersect"}),$("div.draggable").draggable({scroll:!0,helper:"clone",opacity:.8,revert:"invalid",cursor:"move",connectToSortable:"#Target",containment:"body"}),$("#Target .sortable").each((function(e,t){i($(this).attr("id").replace("Setting",""))})),"admin_edit"==t&&$("#WidgetAreaUpdateTitleSubmit").click((function(){return $.bcToken.check((function(){return $('#WidgetAreaUpdateTitleForm input[name="_csrfToken"]').val($.bcToken.key),$.ajax({url:$("#WidgetAreaUpdateTitleForm").attr("action"),type:"POST",data:$("#WidgetAreaUpdateTitleForm").serialize(),dataType:"text",beforeSend:function(){$("#WidgetAreaUpdateTitleSubmit").prop("disabled",!0),$("#BcMessageBox").slideUp(),$("#WidgetAreaUpdateTitleLoader").show()},success:function(e){e?$("#BcSystemMessage").html(bcI18n.infoMessage2):$("#BcSystemMessage").html(bcI18n.alertMessage3),$("#BcMessageBox").slideDown()},error:function(){$("#BcSystemMessage").html(bcI18n.alertMessage3),$("#BcMessageBox").slideDown()},complete:function(e,t){$("#WidgetAreaUpdateTitleSubmit").removeAttr("disabled"),$("#WidgetAreaUpdateTitleLoader").hide()}})}),{loaderType:"target",loaderSelector:"#WidgetAreaUpdateTitleLoader",hideLoader:!1}),!1}))}));
//# sourceMappingURL=form.bundle.js.map
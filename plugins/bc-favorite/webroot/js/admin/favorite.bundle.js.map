{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./webroot/js/src/admin/favorite.js"],"names":["$","click","document","querySelector","__vue__","openModal","append","bt","trigger","positions","shadow","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOverlap","noShadowOpts","strokeStyle","strokeWidth","width","spikeLength","spikeGirth","padding","cornerRadius","fill","cssStyles","fontSize","showTip","box","fadeIn","hideTip","callback","animate","opacity","contentSelector","initFavoriteList","validate","submit","favoriteSortStartHandler","event","ui","css","item","height","startIndex","index","favoriteSortUpdateHandler","sortTable","offset","id","attr","bcToken","check","data","key","ajax","url","bcUtil","apiBaseUrl","headers","bcJwt","accessToken","type","dataType","beforeSend","show","success","result","find","each","error","sortable","alert","bcI18n","favoriteAlertMessage1","complete","hide","hideLoader","unbind","e","favoriteSortableOptions","scroll","zIndex","containment","tolerance","distance","cursor","placeholder","revert","start","update","i","match","html","remove"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEAA,CAAC,CAAC,YAAY;AACVA,GAAC,CAAC,iBAAD,CAAD,CAAqBC,KAArB,CAA2B,YAAU;AACjCC,YAAQ,CAACC,aAAT,CAAuB,mBAAvB,EAA4CC,OAA5C,CAAoDC,SAApD;AACH,GAFD,EADU,CAIV;AACA;AACA;;AAEAL,GAAC,CAAC,MAAD,CAAD,CAAUM,MAAV,CAAiBN,CAAC,CAAC,gBAAD,CAAlB,EARU,CASV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA,GAAC,CAAC,kBAAD,CAAD,CAAsBO,EAAtB,CAAyB;AACrBC,WAAO,EAAE,OADY;AAErBC,aAAS,EAAE,KAFU;AAGrBC,UAAM,EAAE,IAHa;AAIrBC,iBAAa,EAAE,CAJM;AAKrBC,iBAAa,EAAE,CALM;AAMrBC,cAAU,EAAE,CANS;AAOrBC,eAAW,EAAE,gBAPQ;AAQrBC,iBAAa,EAAE,KARM;AASrBC,gBAAY,EAAE;AACVC,iBAAW,EAAE,MADH;AAEVC,iBAAW,EAAE;AAFH,KATO;AAarBC,SAAK,EAAE,OAbc;;AAcrB;AACAC,eAAW,EAAE,EAfQ;AAgBrBC,cAAU,EAAE,EAhBS;AAiBrBC,WAAO,EAAE,EAjBY;AAkBrBC,gBAAY,EAAE,CAlBO;AAmBrBL,eAAW,EAAE,CAnBQ;;AAmBL;AAChBD,eAAW,EAAE,MApBQ;AAqBrBO,QAAI,EAAE,2BArBe;AAsBrBC,aAAS,EAAE;AACPC,cAAQ,EAAE;AADH,KAtBU;AAyBrBC,WAAO,EAAE,iBAAUC,GAAV,EAAe;AACpB5B,OAAC,CAAC4B,GAAD,CAAD,CAAOC,MAAP,CAAc,GAAd;AACH,KA3BoB;AA4BrBC,WAAO,EAAE,iBAAUF,GAAV,EAAeG,QAAf,EAAyB;AAC9B/B,OAAC,CAAC4B,GAAD,CAAD,CAAOI,OAAP,CAAe;AACXC,eAAO,EAAE;AADE,OAAf,EAEG,GAFH,EAEQF,QAFR;AAGH,KAhCoB;AAiCrBG,mBAAe,EAAE;AAjCI,GAAzB;AAmCA;AACJ;AACA;;AACIC,kBAAgB;AAChB;AACJ;AACA;;AACInC,GAAC,CAAC,mBAAD,CAAD,CAAuBoC,QAAvB;AACApC,GAAC,CAAC,mBAAD,CAAD,CAAuBqC,MAAvB,CAA8B,YAAY;AACtC,WAAO,KAAP;AACH,GAFD;AAIA;AACJ;AACA;;AACI,WAASC,wBAAT,CAAkCC,KAAlC,EAAyCC,EAAzC,EAA6C;AACzCxC,KAAC,CAAC,oCAAD,CAAD,CAAwCyC,GAAxC,CAA4C,QAA5C,EAAsDD,EAAE,CAACE,IAAH,CAAQC,MAAR,EAAtD;AACAH,MAAE,CAACE,IAAH,CAAQE,UAAR,GAAqBJ,EAAE,CAACE,IAAH,CAAQG,KAAR,EAArB;AACH;AAED;AACJ;AACA;;;AACI,WAASC,yBAAT,CAAmCP,KAAnC,EAA0CC,EAA1C,EAA8C;AAC1C,QAAIO,SAAS,GAAG/C,CAAC,CAAC,qBAAD,CAAjB;AACA,QAAIgD,MAAM,GAAGR,EAAE,CAACE,IAAH,CAAQG,KAAR,KAAkBL,EAAE,CAACE,IAAH,CAAQE,UAAvC;AACA,QAAIK,EAAE,GAAGT,EAAE,CAACE,IAAH,CAAQQ,IAAR,CAAa,SAAb,CAAT;AAEAlD,KAAC,CAACmD,OAAF,CAAUC,KAAV,CAAgB,YAAY;AACxB,UAAIC,IAAI,GAAG;AACP,cAAMJ,EADC;AAEP,kBAAUD,MAFH;AAGP,sBAAchD,CAAC,CAACmD,OAAF,CAAUG;AAHjB,OAAX;AAKA,aAAOtD,CAAC,CAACuD,IAAF,CAAO;AACVC,WAAG,EAAExD,CAAC,CAACyD,MAAF,CAASC,UAAT,GAAsB,wCADjB;AAEVC,eAAO,EAAE;AACL,2BAAiB3D,CAAC,CAAC4D,KAAF,CAAQC;AADpB,SAFC;AAKVC,YAAI,EAAE,MALI;AAMVT,YAAI,EAAEA,IANI;AAOVU,gBAAQ,EAAE,MAPA;AAQVC,kBAAU,EAAE,sBAAY;AACpBhE,WAAC,CAAC,UAAD,CAAD,CAAciE,IAAd;AACH,SAVS;AAWVC,eAAO,EAAE,iBAAUC,MAAV,EAAkB;AACvBpB,mBAAS,CAACqB,IAAV,CAAe,IAAf,EAAqBC,IAArB,CAA0B,UAAUxB,KAAV,EAAiB;AACvC7C,aAAC,CAAC,IAAD,CAAD,CAAQkD,IAAR,CAAa,IAAb,EAAmB,gBAAgBL,KAAnC;AACH,WAFD;AAGH,SAfS;AAgBVyB,aAAK,EAAE,iBAAY;AACfvB,mBAAS,CAACwB,QAAV,CAAmB,QAAnB;AACAC,eAAK,CAACC,MAAM,CAACC,qBAAR,CAAL;AACH,SAnBS;AAoBVC,gBAAQ,EAAE,oBAAY;AAClB3E,WAAC,CAAC,UAAD,CAAD,CAAc4E,IAAd;AACH;AAtBS,OAAP,CAAP;AAwBH,KA9BD,EA8BG;AAACC,gBAAU,EAAE;AAAb,KA9BH;AA+BH;AAED;AACJ;AACA;;;AACI,WAAS1C,gBAAT,GAA4B;AAExB;AACAnC,KAAC,CAAC,wBAAD,CAAD,CAA4B8E,MAA5B,GAHwB,CAIxB;;AACA,QAAI;AACA9E,OAAC,CAAC,qBAAD,CAAD,CAAyBuE,QAAzB,CAAkC,SAAlC;AACH,KAFD,CAEE,OAAOQ,CAAP,EAAU,CACX,CARuB,CAUxB;;;AACA,QAAIC,uBAAuB,GAAG;AAC1BC,YAAM,EAAE,IADkB;AAE1BhD,aAAO,EAAE,IAFiB;AAG1BiD,YAAM,EAAE,EAHkB;AAI1BC,iBAAW,EAAE,MAJa;AAK1BC,eAAS,EAAE,SALe;AAM1BC,cAAQ,EAAE,CANgB;AAO1BC,YAAM,EAAE,SAPkB;AAQ1BC,iBAAW,EAAE,+BARa;;AAS1B;AACAC,YAAM,EAAE,GAVkB;AAW1BC,WAAK,EAAEnD,wBAXmB;AAY1BoD,YAAM,EAAE5C;AAZkB,KAA9B;AAeA9C,KAAC,CAAC,qBAAD,CAAD,CAAyBuE,QAAzB,CAAkCS,uBAAlC;AAEA,QAAIW,CAAC,GAAG,CAAR;AACA3F,KAAC,CAAC,wBAAD,CAAD,CAA4BqE,IAA5B,CAAiC,YAAY;AACzC;AACA,UAAI,CAACrE,CAAC,CAAC,IAAD,CAAD,CAAQkD,IAAR,CAAa,OAAb,EAAsB0C,KAAtB,CAA4B,SAA5B,CAAD,IAA2C5F,CAAC,CAAC,IAAD,CAAD,CAAQoE,IAAR,CAAa,GAAb,EAAkByB,IAAlB,MAA4B,IAA3E,EAAiF;AAC7E7F,SAAC,CAAC,IAAD,CAAD,CAAQ8F,MAAR;AACH,OAFD,MAEO;AACH9F,SAAC,CAAC,IAAD,CAAD,CAAQkD,IAAR,CAAa,IAAb,EAAmB,gBAAiByC,CAApC;AACAA,SAAC;AACJ;AACJ,KARD;AAUH;AAEJ,CAnMA,CAAD,C","file":"admin/favorite.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./webroot/js/src/admin/favorite.js\");\n","/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) baserCMS Users Community <https://basercms.net/community/>\n *\n * @copyright       Copyright (c) baserCMS Users Community\n * @link            https://basercms.net baserCMS Project\n * @since           baserCMS v 2.0.0\n * @license         https://basercms.net/license/index.html\n */\n\n/**\n * よく使う項目の処理を行う\n */\n\n$(function () {\n    $(\"#BtnFavoriteAdd\").click(function(){\n        document.querySelector('#FavoriteListWrap').__vue__.openModal();\n    });\n    //\n    // var currentPageName = $('#FavoriteScript').attr('data-current-page-name');\n    // var currentPageUrl = $('#FavoriteScript').attr('data-current-page-url');\n\n    $(\"body\").append($(\"#FavoritesMenu\"));\n    //\n    // /**\n    //  * ダイアログを初期化\n    //  */\n    // $(\"#BtnFavoriteAdd\").click(function () {\n    //     $('#FavoriteDialog').dialog(\n    //         {\n    //             position: {my: \"center\", at: \"center\", of: window},\n    //             bgiframe: true,\n    //             width: '360px',\n    //             modal: true,\n    //             open: function (event, ui) {\n    //                 if ($(\".favorite-menu-list .selected\").length == 0) {\n    //                     $(this).dialog('option', 'title', bcI18n.favoriteTitle1);\n    //                     $(\"#FavoriteName\").val(currentPageName);\n    //                     $(\"#FavoriteUrl\").val(currentPageUrl);\n    //                 } else {\n    //                     $(this).dialog('option', 'title', bcI18n.favoriteTitle2);\n    //                     $(\"#FavoriteId\").val($(\".favorite-menu-list .selected .favorite-id\").val());\n    //                     $(\"#FavoriteName\").val($(\".favorite-menu-list .selected .favorite-name\").val());\n    //                     $(\"#FavoriteUrl\").val($(\".favorite-menu-list .selected .favorite-url\").val());\n    //                 }\n    //                 // $(\"#FavoriteAjaxForm\").submit();\n    //                 $(\"#FavoriteName\").focus();\n    //\n    //             },\n    //             close: function () {\n    //                 $(\"#FavoriteId\").val('');\n    //                 $(\"#FavoriteName\").val('');\n    //                 $(\"#FavoriteUrl\").val('');\n    //             },\n    //             buttons: [\n    //                 {\n    //                     text: bcI18n.commonCancel,\n    //                     click: function () {\n    //                         $(this).dialog('close');\n    //                     }\n    //                 },\n    //                 {\n    //                     text: bcI18n.commonSave,\n    //                 }\n    //             ]\n    //         }\n    //     );\n    //     return false;\n    // });\n    $(\"#BtnFavoriteHelp\").bt({\n        trigger: 'click',\n        positions: 'top',\n        shadow: true,\n        shadowOffsetX: 3,\n        shadowOffsetY: 3,\n        shadowBlur: 8,\n        shadowColor: 'rgba(0,0,0,.8)',\n        shadowOverlap: false,\n        noShadowOpts: {\n            strokeStyle: '#999',\n            strokeWidth: 3\n        },\n        width: '360px',\n        /*shrinkToFit: true,*/\n        spikeLength: 12,\n        spikeGirth: 18,\n        padding: 15,\n        cornerRadius: 0,\n        strokeWidth: 6, /*no stroke*/\n        strokeStyle: '#690',\n        fill: 'rgba(255, 255, 255, 1.00)',\n        cssStyles: {\n            fontSize: '12px'\n        },\n        showTip: function (box) {\n            $(box).fadeIn(200);\n        },\n        hideTip: function (box, callback) {\n            $(box).animate({\n                opacity: 0\n            }, 100, callback);\n        },\n        contentSelector: \"$(this).next('.helptext').html()\"\n    });\n    /**\n     * お気に入り初期化\n     */\n    initFavoriteList();\n    /**\n     * バリデーション\n     */\n    $(\"#FavoriteAjaxForm\").validate();\n    $(\"#FavoriteAjaxForm\").submit(function () {\n        return false\n    });\n\n    /**\n     * 並び替え開始時イベント\n     */\n    function favoriteSortStartHandler(event, ui) {\n        $(\"ul.favorite-menu-list .placeholder\").css('height', ui.item.height());\n        ui.item.startIndex = ui.item.index();\n    }\n\n    /**\n     * 並び順を更新時イベント\n     */\n    function favoriteSortUpdateHandler(event, ui) {\n        var sortTable = $(\".favorite-menu-list\");\n        var offset = ui.item.index() - ui.item.startIndex;\n        var id = ui.item.attr('data-id');\n\n        $.bcToken.check(function () {\n            var data = {\n                'id': id,\n                'offset': offset,\n                '_csrfToken': $.bcToken.key\n            };\n            return $.ajax({\n                url: $.bcUtil.apiBaseUrl + 'bc-favorite/favorites/change_sort.json',\n                headers: {\n                    \"Authorization\": $.bcJwt.accessToken,\n                },\n                type: 'POST',\n                data: data,\n                dataType: 'text',\n                beforeSend: function () {\n                    $(\"#Waiting\").show();\n                },\n                success: function (result) {\n                    sortTable.find(\"li\").each(function (index) {\n                        $(this).attr('id', 'FavoriteRow' + index);\n                    });\n                },\n                error: function () {\n                    sortTable.sortable(\"cancel\");\n                    alert(bcI18n.favoriteAlertMessage1);\n                },\n                complete: function () {\n                    $(\"#Waiting\").hide();\n                }\n            });\n        }, {hideLoader: false});\n    }\n\n    /**\n     * 行を初期化\n     */\n    function initFavoriteList() {\n\n        // イベント削除\n        $(\".favorite-menu-list li\").unbind();\n        //$(\".favorite-menu-list li\").destroyContextMenu();\n        try {\n            $(\".favorite-menu-list\").sortable(\"destroy\");\n        } catch (e) {\n        }\n\n        // イベント登録\n        var favoriteSortableOptions = {\n            scroll: true,\n            opacity: 0.80,\n            zIndex: 55,\n            containment: 'body',\n            tolerance: 'pointer',\n            distance: 5,\n            cursor: 'pointer',\n            placeholder: 'ui-widget-content placeholder',\n            /*handle: \".favorite-menu-list li a\",*/\n            revert: 100,\n            start: favoriteSortStartHandler,\n            update: favoriteSortUpdateHandler\n        };\n\n        $(\".favorite-menu-list\").sortable(favoriteSortableOptions);\n\n        var i = 1;\n        $(\".favorite-menu-list li\").each(function () {\n            // アクセス制限によってリンクが出力されていない場合はLIごと削除する\n            if (!$(this).attr('class').match(/no-data/) && $(this).find('a').html() == null) {\n                $(this).remove();\n            } else {\n                $(this).attr('id', 'FavoriteRow' + (i));\n                i++;\n            }\n        });\n\n    }\n\n});\n"],"sourceRoot":""}
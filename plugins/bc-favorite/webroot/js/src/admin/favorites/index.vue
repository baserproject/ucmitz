<template>
    <h2 class="bca-nav-favorite-title">
        <button type="button" id="btn-favorite-expand" class="bca-collapse__btn bca-nav-favorite-title-button"
                data-bca-collapse="favorite-collapse" data-bca-target="#favoriteBody" aria-expanded="false"
                aria-controls="favoriteBody" data-bca-state="<?php echo ($favoriteBoxOpened)? "open" : '' ?>">
        <?php echo __d('baser', 'お気に入り') ?> <i class="bca-icon--chevron-down bca-nav-favorite-title-icon"></i>
        </button>
    </h2>

    <ul class="favorite-menu-list bca-nav-favorite-list bca-collapse" id="favoriteBody">
        <?php if (!empty($favorites)): ?>
        <?php foreach($favorites as $favorite): ?>
            <?php $this->BcBaser->element('favorite_menu_row', ['favorite' => $favorite]) ?>
        <?php endforeach ?>

        <?php else: ?>
        <li class="no-data"><small><?php echo __d('baser', '「お気に入りに追加」ボタンよりお気に入りを登録しておく事ができます。') ?></small></li>
        <?php endif ?>
    </ul>
    <div id="FavoriteDialog" title="お気に入り登録" style="display:none">
    <?php echo $this->BcAdminForm->create('Favorite', ['url' => ['plugin' => null, 'action' => 'ajax']]) ?>
    <?php echo $this->BcAdminForm->control('Favorite.id', ['type' => 'hidden']) ?>
    <dl>
        <dt><?php echo $this->BcForm->label('Favorite.name', __d('baser', 'タイトル')) ?></dt>
        <dd><?php echo $this->BcAdminForm->control('Favorite.name', ['type' => 'text', 'size' => 30, 'class' => 'required']) ?></dd>
        <dt><?php echo $this->BcForm->label('Favorite.url', __d('baser', 'URL')) ?></dt>
        <dd><?php echo $this->BcAdminForm->control('Favorite.url', ['type' => 'text', 'size' => 30, 'class' => 'required']) ?></dd>
    </dl>
    <?php echo $this->BcAdminForm->end() ?>
    </div>


    <ul id="FavoritesMenu" class="context-menu" style="display:none">
    <li class="edit"><?php $this->BcBaser->link(__d('baser', '編集'), '#FavoriteEdit') ?></li>
    <li class="delete"><?php $this->BcBaser->link(__d('baser', '削除'), '#FavoriteDelete') ?></li>
    </ul>
</template>

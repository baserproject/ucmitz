{"version":3,"file":"admin/blog_posts/form.bundle.js","mappings":";;;;;;;;;AAUAA,GAAE,WAEE,IAAIC,EAAUD,EAAE,iCAAiCE,KAAK,gBAClDC,EAAiBH,EAAE,iCAAiCE,KAAK,mBAE7DF,EAAE,oBAAoBI,MAAK,WACvBJ,EAAEK,MAAMC,UAAS,SAAUC,GACvB,OAAIA,EAAEC,OAAqB,KAAZD,EAAEC,KAIpB,GACJ,IAEIC,SAASC,sBAAsB,SAChCV,EAAE,eAAeW,OAErBX,EAAE,eAAeY,OAAM,WACnB,IAAIC,EAAWb,EAAE,mGAMjB,OALAa,EAASC,KAAKb,GACdD,EAAEK,MAAMU,MAAMF,GACdA,EAASG,SACTP,SAASQ,YAAY,QACrBJ,EAASK,UACF,CACV,IAEDlB,EAAE,eAAeY,OAAM,WACnBO,OAAOC,KAAK,GAAI,WAChB,IAAIC,EAAOrB,EAAEK,MAAMiB,QAAQ,QACvBC,EAASF,EAAKnB,KAAK,UACnBsB,EAAc,UACdC,EAAatB,EAkBjB,MAhBsC,SAAlCH,EAAE,uBAAuB0B,QACzBF,EAAc,SAEdC,EAAWE,MAAM,MACjBF,GAAc,YAAcD,EAE5BC,GAAc,YAAcD,EAEhCH,EAAKnB,KAAK,SAAU,WACpBmB,EAAKnB,KAAK,SAAUuB,GACpBJ,EAAKO,SACLP,EAAKnB,KAAK,SAAU,SACpBmB,EAAKnB,KAAK,SAAUqB,GACpBvB,EAAE6B,IAAI7B,EAAE8B,UAAY,6CAA6C,SAAUC,GACvE/B,EAAE,4BAA4B0B,IAAIK,EACrC,KACM,CACV,IAKD/B,EAAE,YAAYY,OAAM,WAShB,OARAZ,EAAEgC,OAAOC,aACuB,oBAArBC,mBACPA,kBAAkBjB,YAAY,eAElCjB,EAAE,iBAAiB0B,IAAI,QACvB1B,EAAEmC,QAAQC,OAAM,WACZpC,EAAE,iBAAiB4B,QACtB,GAAE,CAACS,WAAW,EAAOC,YAAY,KAC3B,CACV,IAKDtC,EAAE,gBAAgBM,UAAS,SAAUiC,GACjC,QAAKA,EAAG/B,OAAsB,KAAb+B,EAAG/B,OAAkB+B,EAAGC,SAA0B,KAAfD,EAAGC,WACnDxC,EAAE,kBAAkBY,SACb,EAId,IAEDZ,EAAE,kBAAkBY,OAAM,WACtB,QAAKZ,EAAE,gBAAgB0B,QAGvB1B,EAAEmC,QAAQC,OAAM,WACZ,OAAOpC,EAAEyC,KAAK,CACVC,KAAM,OACNC,IAAK3C,EAAE,cAAc4C,OACrBC,KAAM,CACF,sBAAuB7C,EAAE,gBAAgB0B,MACzC,WAAc1B,EAAEmC,QAAQW,KAE5BC,SAAU,OACVC,WAAY,WACRhD,EAAE,kBAAkBiD,KAAK,YAAY,GACrCjD,EAAE,cAAckD,MACnB,EACDC,QAAS,SAAUpB,GACXA,GACA/B,EAAE,aAAaoD,OAAOrB,GACtB/B,EAAE,0CAA0CqD,OAAOJ,KAAK,WAAW,GACnEjD,EAAE,gBAAgB0B,IAAI,KAEtB4B,MAAMC,OAAOC,cAEpB,EACDC,MAAO,WACHH,MAAMC,OAAOG,cAChB,EACDC,SAAU,SAAUC,EAAKC,GACrB7D,EAAE,kBAAkB8D,WAAW,YAC/B9D,EAAE,cAAcW,OAChBX,EAAE,aAAa+D,OAAO,YAAa,CAAC,EAAG,KAC1C,GAER,GAAE,CAACC,WAAY,SAAUC,eAAgB,aAAc3B,YAAY,KAC7D,EACV,IAKDtC,EAAE,uBAAuBY,OAAM,WAwE3B,OAvEAZ,EAAE,wBAAwBkE,OAAO,CAC7BC,MAAO,OACPC,OAAO,EACPhD,KAAM,WAEFpB,EAAEK,MAAMgE,IAAI,WAAY,WACxBrE,EAAEK,KAAKiE,YAAYD,IAAI,WAAY,UACtC,EACDE,MAAO,WACHvE,EAAE,sBAAsB0B,IAAI,IAC5B1B,EAAE,qBAAqB0B,IAAI,GAC9B,EACD8C,QAAS,CACLC,OAAQ,CACJ3D,KAAMyC,OAAOmB,aACb9D,MAAO,WACHZ,EAAEK,MAAM6D,OAAO,QAClB,GAELS,KAAM,CACF7D,KAAMyC,OAAOqB,WACbhE,MAAO,WACH,IAAIiE,EAAO7E,EAAE,0DAA0D0B,MACnEoD,EAAQ9E,EAAE,2DAA2D0B,MA2CzE,OAzCKmD,IACDA,EAAOC,GAGX9E,EAAEmC,QAAQC,OAAM,WACZ,OAAOpC,EAAEyC,KAAK,CACVC,KAAM,OACNC,IAAK3C,EAAE,uBAAuB4C,OAC9BC,KAAM,CACF,2BAA4BgC,EAC5B,4BAA6BC,EAC7B,WAAc9E,EAAEmC,QAAQW,KAE5BC,SAAU,SACVC,WAAY,WACRhD,EAAE,uBAAuBiD,KAAK,YAAY,GAC1CjD,EAAEgC,OAAOC,YACZ,EACDkB,QAAS,SAAUpB,GACXA,GACA/B,EAAE,2BAA2BoD,OAAOpD,EAAE,cAAc0B,IAAIK,GAAQa,KAAKkC,IACrE9E,EAAE,2BAA2B0B,IAAIK,IAEjCuB,MAAMC,OAAOwB,eAEjB/E,EAAE,wBAAwBkE,OAAO,QACpC,EACDT,MAAO,SAAUuB,EAAgBnB,GACzBmB,EAAeC,aACf3B,MAAMC,OAAO2B,cAAgB,OAASF,EAAeC,cAErD3B,MAAMC,OAAO4B,cAAgB,OAASH,EAAeI,WAE5D,EACDzB,SAAU,SAAUC,EAAKC,GACrB7D,EAAE,uBAAuB8D,WAAW,YACpC9D,EAAEgC,OAAOM,aACTtC,EAAE,2BAA2B+D,OAAO,YAAa,CAAC,EAAG,KACxD,GAER,GAAE,CAACzB,YAAY,KACT,CACV,OAIN,CACV,GACJ","sources":["webpack://bc-blog/./src/js/admin/blog_posts/form.js"],"sourcesContent":["/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) NPO baser foundation <https://baserfoundation.org/>\n *\n * @copyright     Copyright (c) NPO baser foundation\n * @link          https://basercms.net baserCMS Project\n * @since         5.0.0\n * @license       https://basercms.net/license/index.html MIT License\n */\n\n$(function () {\n\n    var fullUrl = $(\"#AdminBlogBLogPostsEditScript\").attr('data-fullurl');\n    var previewurlBase = $(\"#AdminBlogBLogPostsEditScript\").attr('data-previewurl');\n\n    $(\"input[type=text]\").each(function () {\n        $(this).keypress(function (e) {\n            if (e.which && e.which === 13) {\n                return false;\n            }\n            return true;\n        });\n    });\n\n    if (!document.queryCommandSupported('copy')) {\n        $(\"#BtnCopyUrl\").hide();\n    }\n    $(\"#BtnCopyUrl\").click(function () {\n        var copyArea = $(\"<textarea style=\\\" opacity:0; width:1px; height:1px; margin:0; padding:0; border-style: none;\\\"/>\");\n        copyArea.text(fullUrl);\n        $(this).after(copyArea);\n        copyArea.select();\n        document.execCommand(\"copy\");\n        copyArea.remove();\n        return false;\n    });\n\n    $(\"#BtnPreview\").click(function () {\n        window.open('', 'preview');\n        var form = $(this).parents('form');\n        var action = form.attr('action');\n        var previewMode = 'default';\n        var previewurl = previewurlBase;\n\n        if ($(\"#DraftModeDetailTmp\").val() == 'draft') {\n            previewMode = 'draft';\n        }\n        if (previewurl.match(/\\?/)) {\n            previewurl += '&preview=' + previewMode;\n        } else {\n            previewurl += '?preview=' + previewMode;\n        }\n        form.attr('target', 'preview');\n        form.attr('action', previewurl);\n        form.submit();\n        form.attr('target', '_self');\n        form.attr('action', action);\n        $.get($.baseUrl() + '/bc_form/ajax_get_token?requestview=false', function (result) {\n            $('input[name=\"_csrfToken\"]').val(result);\n        });\n        return false;\n    });\n\n    /**\n     * フォーム送信時イベント\n     */\n    $(\"#BtnSave\").click(function () {\n        $.bcUtil.showLoader();\n        if (typeof editor_detail_tmp != \"undefined\") {\n            editor_detail_tmp.execCommand('synchronize');\n        }\n        $(\"#BlogPostMode\").val('save');\n        $.bcToken.check(function () {\n            $(\"#BlogPostForm\").submit();\n        }, {useUpdate: false, hideLoader: false});\n        return false;\n    });\n\n    /**\n     * ブログタグ追加\n     */\n    $(\"#BlogTagName\").keypress(function (ev) {\n        if ((ev.which && ev.which === 13) || (ev.keyCode && ev.keyCode === 13)) {\n            $(\"#BtnAddBlogTag\").click();\n            return false;\n        } else {\n            return true;\n        }\n    });\n\n    $(\"#BtnAddBlogTag\").click(function () {\n        if (!$(\"#BlogTagName\").val()) {\n            return false;\n        }\n        $.bcToken.check(function () {\n            return $.ajax({\n                type: \"POST\",\n                url: $(\"#AddTagUrl\").html(),\n                data: {\n                    'data[BlogTag][name]': $(\"#BlogTagName\").val(),\n                    '_csrfToken': $.bcToken.key\n                },\n                dataType: 'html',\n                beforeSend: function () {\n                    $(\"#BtnAddBlogTag\").prop('disabled', true);\n                    $(\"#TagLoader\").show();\n                },\n                success: function (result) {\n                    if (result) {\n                        $(\"#BlogTags\").append(result);\n                        $('input[name=\"data[BlogTag][BlogTag][]\"]').last().prop('checked', true);\n                        $(\"#BlogTagName\").val('');\n                    } else {\n                        alert(bcI18n.alertMessage1);\n                    }\n                },\n                error: function () {\n                    alert(bcI18n.alertMessage2);\n                },\n                complete: function (xhr, textStatus) {\n                    $(\"#BtnAddBlogTag\").removeAttr('disabled');\n                    $(\"#TagLoader\").hide();\n                    $(\"#BlogTags\").effect(\"highlight\", {}, 1500);\n                }\n            });\n        }, {loaderType: 'target', loaderSelector: '#TagLoader', hideLoader: false});\n        return false;\n    });\n\n    /**\n     * ブログカテゴリ追加\n     */\n    $(\"#BtnAddBlogCategory\").click(function () {\n        $(\"#AddBlogCategoryForm\").dialog({\n            width: 'auto',\n            modal: true,\n            open: function () {\n                // ヘルプがダイアログ内で切れてしまうのを防ぐ\n                $(this).css('overflow', 'visible');\n                $(this.parentNode).css('overflow', 'visible');\n            },\n            close: function () {\n                $(\"#BlogCategoryTitle\").val('');\n                $(\"#BlogCategoryName\").val('');\n            },\n            buttons: {\n                cancel: {\n                    text: bcI18n.commonCancel,\n                    click: function () {\n                        $(this).dialog('close');\n                    }\n                },\n                save: {\n                    text: bcI18n.commonSave,\n                    click: function () {\n                        var name = $('#AddBlogCategoryForm [name=\"data[BlogCategory][name]\"]').val();\n                        var title = $('#AddBlogCategoryForm [name=\"data[BlogCategory][title]\"]').val();\n\n                        if (!name) {\n                            name = title;\n                        }\n\n                        $.bcToken.check(function () {\n                            return $.ajax({\n                                type: \"POST\",\n                                url: $(\"#AddBlogCategoryUrl\").html(),\n                                data: {\n                                    'data[BlogCategory][name]': name,\n                                    'data[BlogCategory][title]': title,\n                                    '_csrfToken': $.bcToken.key\n                                },\n                                dataType: 'script',\n                                beforeSend: function () {\n                                    $(\"#BtnAddBlogCategory\").prop('disabled', true);\n                                    $.bcUtil.showLoader();\n                                },\n                                success: function (result) {\n                                    if (result) {\n                                        $(\"#BlogPostBlogCategoryId\").append($('<option />').val(result).html(title));\n                                        $(\"#BlogPostBlogCategoryId\").val(result);\n                                    } else {\n                                        alert(bcI18n.alertMessage3);\n                                    }\n                                    $(\"#AddBlogCategoryForm\").dialog('close');\n                                },\n                                error: function (XMLHttpRequest, textStatus) {\n                                    if (XMLHttpRequest.responseText) {\n                                        alert(bcI18n.alertMessage4 + '\\n\\n' + XMLHttpRequest.responseText);\n                                    } else {\n                                        alert(bcI18n.alertMessage5 + '\\n\\n' + XMLHttpRequest.statusText);\n                                    }\n                                },\n                                complete: function (xhr, textStatus) {\n                                    $(\"#BtnAddBlogCategory\").removeAttr('disabled');\n                                    $.bcUtil.hideLoader();\n                                    $(\"#BlogPostBlogCategoryId\").effect(\"highlight\", {}, 1500);\n                                }\n                            });\n                        }, {hideLoader: false});\n                        return false;\n                    }\n                }\n            }\n        });\n        return false;\n    });\n});\n"],"names":["$","fullUrl","attr","previewurlBase","each","this","keypress","e","which","document","queryCommandSupported","hide","click","copyArea","text","after","select","execCommand","remove","window","open","form","parents","action","previewMode","previewurl","val","match","submit","get","baseUrl","result","bcUtil","showLoader","editor_detail_tmp","bcToken","check","useUpdate","hideLoader","ev","keyCode","ajax","type","url","html","data","key","dataType","beforeSend","prop","show","success","append","last","alert","bcI18n","alertMessage1","error","alertMessage2","complete","xhr","textStatus","removeAttr","effect","loaderType","loaderSelector","dialog","width","modal","css","parentNode","close","buttons","cancel","commonCancel","save","commonSave","name","title","alertMessage3","XMLHttpRequest","responseText","alertMessage4","alertMessage5","statusText"],"sourceRoot":""}